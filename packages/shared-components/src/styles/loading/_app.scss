// ==================== 应用专属 Loading 样式 ====================
// AppLoading 组件样式（teleport 到 body，使用全局样式确保正确应用）
// 关键：使用 body 选择器提高优先级，确保样式正确应用

body .btc-app-loading-mask {
	position: fixed !important;
	top: 0 !important;
	left: 0 !important;
	right: 0 !important;
	bottom: 0 !important;
	width: 100vw !important;
	height: 100vh !important;
	min-width: 100vw !important;
	min-height: 100vh !important;
	// 关键：使用风格背景，确保页面内容在 loading 期间被遮挡
	background: var(--btc-surface-page) !important;
	display: flex !important;
	flex-direction: column !important;
	align-items: center !important;
	justify-content: center !important;
	z-index: 99999 !important;
	margin: 0 !important;
	padding: 0 !important;
	pointer-events: auto !important;
	box-sizing: border-box !important;
	overflow: hidden !important;
	/* 关键修改：初始状态 visibility:hidden + opacity:0，过渡同时生效 */
	visibility: hidden !important;
	opacity: 0 !important;
	transition: background-color 0.2s ease, visibility 0.3s ease, opacity 0.3s ease !important;
}

/* 显示时同步激活 visibility + opacity */
body .btc-app-loading-mask--show {
	visibility: visible !important;
	opacity: 1 !important;
}

body .btc-app-loading-container {
	display: flex !important;
	flex-direction: column !important;
	align-items: center !important;
	justify-content: center !important;
	width: 100% !important;
	height: 100% !important;
	min-height: 100% !important;
	margin: 0 !important;
	padding: 0 !important;
	box-sizing: border-box !important;
	/* 关键：容器初始隐藏，通过 JavaScript 添加 --ready 类后显示 */
	opacity: 0 !important;
	transition: opacity 0.3s ease !important;
}

body .btc-app-loading-container.btc-app-loading-container--ready {
	opacity: 1 !important;
}

body .btc-app-loading-content {
	display: flex !important;
	flex-direction: column !important;
	align-items: center !important;
	justify-content: center !important;
	width: 100% !important;
}

// Loading 动画容器基础样式（对应根级别的 preload__loading）
// 应用级 loading 使用和根级别相同的动画组件，所以样式也使用相同的选择器
body .btc-app-loading-content .preload__loading {
	margin: 0 !important;
	display: inline-block !important;
	box-sizing: border-box !important;
}

// 应用级 loading 的动画样式复用根级别的样式
// 将 #Loading 选择器改为 body .btc-app-loading-mask--show，确保样式正确应用
// 注意：这些样式定义在 _animations.scss 中，通过选择器优先级确保应用级 loading 也能使用

body .btc-app-loading-spinner {
	width: 100%;
	height: 100%;
	color: var(--el-color-primary);
	animation: btc-app-loading-spin 1s linear infinite;
}

@keyframes btc-app-loading-spin {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}

// Dots 样式：四点旋转动画
body .btc-app-loading-dots-svg {
	width: var(--btc-spacing-11);
	height: var(--btc-spacing-11);
	color: var(--el-color-primary);
}

body .btc-app-loading-dots-spinner {
	// SVG viewBox 是 0 0 40 40，中心点是 (20, 20)，transform-origin 使用 SVG 坐标系统
	// 但这里 SVG 尺寸是 44px，如果使用 viewBox 坐标，应该是 20px 20px
	transform-origin: 20px 20px; // 使用 viewBox 的中心点坐标
	animation: btc-app-loading-dots-rotate 1.6s linear infinite;
}

body .btc-app-loading-dot {
	animation:
		btc-app-loading-dots-fade 1.6s linear infinite,
		btc-app-loading-dots-color-change 3.2s linear infinite;
}

body .btc-app-loading-dot-1 {
	fill: var(--el-color-primary);
	animation-delay: 0s, 0s;
}

body .btc-app-loading-dot-2 {
	fill: var(--el-color-success);
	animation-delay: 0.4s, 0.8s;
}

body .btc-app-loading-dot-3 {
	fill: var(--el-color-warning);
	animation-delay: 0.8s, 1.6s;
}

body .btc-app-loading-dot-4 {
	fill: var(--el-color-danger);
	animation-delay: 1.2s, 2.4s;
}

@keyframes btc-app-loading-dots-rotate {
	100% {
		transform: rotate(360deg);
	}
}

@keyframes btc-app-loading-dots-fade {
	0%,
	100% {
		opacity: 1;
	}
	50% {
		opacity: 0.5;
	}
}

@keyframes btc-app-loading-dots-color-change {
	0% {
		fill: var(--el-color-primary);
	}
	25% {
		fill: var(--el-color-success);
	}
	50% {
		fill: var(--el-color-warning);
	}
	75% {
		fill: var(--el-color-danger);
	}
	100% {
		fill: var(--el-color-primary);
	}
}

// Gradient 样式：渐变圆环旋转动画
body .btc-app-loading-spinner-container .btc-app-loading-gradient-loader {
	position: relative;
	width: var(--btc-spacing-10);
	height: var(--btc-spacing-10);
	display: flex;
	align-items: center;
	justify-content: center;
}

body .btc-app-loading-gradient-circle {
	width: var(--btc-spacing-10);
	height: var(--btc-spacing-10);
	border-radius: 50%;
	background: conic-gradient(from 0deg, var(--el-color-primary), var(--el-color-danger), var(--el-color-primary));
	animation: btc-app-loading-gradient-rotate 2s linear infinite;
	position: relative;
}

body .btc-app-loading-gradient-circle::before {
	content: '';
	position: absolute;
	inset: var(--btc-spacing-1-5);
	background: var(--el-bg-color);
	border-radius: 50%;
}

@keyframes btc-app-loading-gradient-rotate {
	0% {
		transform: rotate(0deg);
	}
	100% {
		transform: rotate(360deg);
	}
}

// 应用名称样式（对应根级别的 preload__name）
body .btc-app-loading-name {
	font-size: calc(var(--btc-spacing-8) - var(--btc-spacing-0-5)) !important;
	color: var(--el-text-color-primary) !important;
	letter-spacing: var(--btc-spacing-1) !important;
	font-weight: bold !important;
	text-align: center !important;
	width: 100% !important;
	margin-left: 0 !important;
	margin-right: 0 !important;
	margin-bottom: var(--btc-spacing-12) !important;
	animation: none !important;
	transition: none !important;
}

// 标题样式（对应根级别的 preload__title）
body .btc-app-loading-title {
	font-size: var(--btc-spacing-3-5) !important;
	color: var(--el-text-color-primary) !important;
	text-align: center !important;
	width: 100% !important;
	margin-left: 0 !important;
	margin-right: 0 !important;
	margin: var(--btc-spacing-8) 0 var(--btc-spacing-5) 0 !important;
	animation: none !important;
	transition: none !important;
}

// 副标题样式（对应根级别的 preload__sub-title）
body .btc-app-loading-sub-title {
	font-size: var(--btc-spacing-3) !important;
	color: var(--el-text-color-secondary) !important;
	text-align: center !important;
	width: 100% !important;
	margin-left: 0 !important;
	margin-right: 0 !important;
	margin-top: var(--btc-spacing-2) !important;
	animation: none !important;
	transition: none !important;
}

body .btc-app-loading-fail-content {
	display: flex !important;
	flex-direction: column !important;
	align-items: center !important;
	justify-content: center !important;
	gap: var(--btc-spacing-4) !important;
	width: 100% !important;
}

body .btc-app-loading-fail-icon {
	width: var(--btc-spacing-10);
	height: var(--btc-spacing-10);
	color: var(--el-color-danger);
}

body .btc-app-loading-fail-title {
	font-size: var(--btc-spacing-4);
	font-weight: 500;
	color: var(--el-color-danger);
	margin: 0;
}

body .btc-app-loading-fail-desc {
	font-size: var(--btc-spacing-3-5);
	color: var(--el-text-color-regular);
	margin: 0;
	margin-bottom: var(--btc-spacing-2);
}

body .btc-app-loading-retry-btn {
	padding: var(--btc-spacing-2) var(--btc-spacing-4);
	background: var(--el-color-primary);
	color: var(--el-color-white);
	border: none;
	border-radius: var(--btc-spacing-1);
	cursor: pointer;
	font-size: var(--btc-spacing-3-5);
	transition: background 0.2s ease;
	margin-top: var(--btc-spacing-2);
}

body .btc-app-loading-retry-btn:hover {
	background: var(--el-color-primary-dark-2);
}

body .btc-app-loading-retry-btn:active {
	background: var(--el-color-primary-dark-1);
}

// 过渡动画已移除，改为使用遮罩和容器的同步过渡
// （原 Vue Transition 过渡动画不再使用）

// 深色主题适配（应用级 loading 和根级别使用相同的深色背景，不需要特殊处理）

html.dark body .btc-app-loading-fail-desc {
	color: var(--el-text-color-regular);
}

// ==================== Progress 样式：进度条动画 ====================
body .btc-app-loading-spinner-container .btc-app-loading-progress-container {
	display: flex !important;
	align-items: center !important;
	gap: var(--btc-spacing-2) !important;
	width: 100% !important;
	height: var(--btc-spacing-6) !important;
}

// 进度条轨道
body .btc-app-loading-progress-track {
	position: relative !important;
	flex: 1 !important;
	height: var(--btc-spacing-2) !important;
	background: color-mix(in srgb, var(--el-text-color-primary) 10%, transparent) !important;
	border-radius: var(--btc-spacing-1) !important;
	overflow: hidden !important;
	box-shadow:
		inset 0 var(--btc-spacing-0-5) var(--btc-spacing-1) color-mix(in srgb, var(--el-text-color-primary) 18%, transparent),
		0 var(--btc-spacing-0-5) 0 color-mix(in srgb, var(--el-text-color-primary) 8%, transparent) !important;
}

// 进度条填充
body .btc-app-loading-progress-fill {
	position: relative !important;
	height: 100% !important;
	background: linear-gradient(
		90deg,
		var(--el-color-primary) 0%,
		var(--el-color-success) 25%,
		var(--el-color-warning) 50%,
		var(--el-color-danger) 75%,
		var(--el-color-primary) 100%
	) !important;
	background-size: 200% 100% !important;
	border-radius: var(--btc-spacing-1) !important;
	animation: btc-app-loading-progress-gradient 2s linear infinite !important;
	box-shadow:
		0 0 var(--btc-spacing-2-5) color-mix(in srgb, var(--el-color-primary) 35%, transparent),
		inset 0 var(--btc-spacing-0-5) 0 color-mix(in srgb, var(--el-text-color-primary) 12%, transparent) !important;
	transition: width 0.3s ease !important;
	overflow: hidden !important;
}

// 进度条光泽效果
body .btc-app-loading-progress-fill .btc-app-loading-progress-shine {
	position: absolute !important;
	top: 0 !important;
	left: 0 !important;
	right: 0 !important;
	bottom: 0 !important;
	background: linear-gradient(
		90deg,
		transparent 0%,
		color-mix(in srgb, var(--el-text-color-primary) 22%, transparent) 50%,
		transparent 100%
	) !important;
	animation: btc-app-loading-progress-shine 1.5s ease-in-out infinite !important;
	border-radius: var(--btc-spacing-1) !important;
}

// 百分比显示
body .btc-app-loading-progress-percentage {
	font-size: var(--btc-spacing-3-5) !important;
	font-weight: 700 !important;
	color: var(--el-text-color-primary) !important;
	min-width: var(--btc-spacing-11) !important;
	text-align: right !important;
	text-shadow: 0 var(--btc-spacing-0-5) var(--btc-spacing-1) color-mix(in srgb, var(--el-text-color-primary) 20%, transparent) !important;
}

// 进度条渐变流动动画
@keyframes btc-app-loading-progress-gradient {
	0% {
		background-position: 0% 0%;
	}
	100% {
		background-position: 200% 0%;
	}
}

// 进度条光泽移动动画
@keyframes btc-app-loading-progress-shine {
	0% {
		transform: translateX(-100%);
	}
	100% {
		transform: translateX(200%);
	}
}

// 深色主题适配
html.dark body .btc-app-loading-progress-track {
	background: color-mix(in srgb, var(--el-text-color-primary) 12%, transparent) !important;
}

html.dark body .btc-app-loading-progress-percentage {
	color: var(--el-text-color-primary) !important;
	text-shadow: 0 var(--btc-spacing-0-5) var(--btc-spacing-1) color-mix(in srgb, var(--el-text-color-primary) 28%, transparent) !important;
}