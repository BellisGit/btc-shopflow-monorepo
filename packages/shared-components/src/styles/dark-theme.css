/* 暗色模式下的布局背景色样式（共享样式） */
/* 使用 CSS 文件确保在微前端环境下也能正确应用 */
/* 确保所有应用（包括系统域主应用）都应用统一的暗色背景色 #0a0a0a */

/* 使用更高优先级的选择器覆盖 Element Plus 的默认 CSS 变量 */
/* 注意：CSS 变量不支持 !important，需要通过选择器优先级和加载顺序来覆盖 */
/* 在预览服务器上，确保样式在 Element Plus 的 dark/css-vars.css 之后加载 */
html.dark,
html.dark:root,
html.dark html,
html.dark body,
html.dark #app {
  /* Element Plus 组件背景色使用 #0a0a0a */
  --el-bg-color: #0a0a0a;
  /* Element Plus 页面背景色使用 #141414（较浅的深色背景，作为整体背景） */
  --el-bg-color-page: #141414;
  /* Element Plus 其他关键 CSS 变量 */
  --el-text-color-primary: #e5eaf3;
  --el-text-color-regular: #cfd3dc;
  --el-text-color-secondary: #a3a6ad;
  --el-text-color-placeholder: #6c6e72;
  --el-text-color-disabled: #6c6e72;
  --el-border-color: #4c4d4f;
  --el-border-color-light: #414243;
  --el-border-color-lighter: #363637;
  --el-border-color-extra-light: #2b2b2c;
  --el-fill-color: #424243;
  --el-fill-color-light: #39393a;
  --el-fill-color-lighter: #2d2d2d;
  --el-fill-color-extra-light: #1d1d1d;
  --el-fill-color-dark: #4c4d4f;
  --el-fill-color-darker: #636466;
  --el-fill-color-blank: transparent;
}

/* body/html 整体背景使用较浅的深色背景 #141414 */
html.dark body,
html.dark html {
  background-color: #141414 !important;
}

/* ========== 关键：确保主题色 CSS 变量传递到子应用 ========== */
/* 在微前端环境下，CSS 变量需要从主应用传递到子应用容器 */
/* 确保 #subapp-viewport 和 [data-qiankun] 能够继承主应用的主题色变量 */
/* 注意：这些变量会通过 JavaScript 动态设置，这里只是作为 fallback */
/* CSS 变量会自动从 html 元素继承，不需要显式设置 */

/* 所有布局成员使用更深的背景 #0a0a0a，在较浅的 body 背景上形成对比 */
html.dark .app-layout__topbar,
html.dark .topbar {
  background-color: #0a0a0a !important;
}

html.dark .app-breadcrumb {
  background-color: #0a0a0a !important;
}

html.dark .app-process,
html.dark .app-process.tab-default {
  background-color: #0a0a0a !important;
}

html.dark .app-layout__content,
html.dark .app-layout__main .app-layout__content {
  background-color: #0a0a0a !important;
}

html.dark #subapp-viewport {
  background-color: #0a0a0a !important;
}

html.dark .app-layout__sidebar,
html.dark .app-layout__sidebar.has-dark-menu {
  background-color: #0a0a0a !important;
}

html.dark .el-menu-dark {
  background-color: #0a0a0a !important;
}

html.dark .el-menu-dark .el-sub-menu .el-menu {
  background-color: #0a0a0a !important;
}

html.dark .app-layout__sidebar .sidebar__menu.el-menu-dark,
html.dark .app-layout__sidebar .el-menu-dark {
  background-color: #0a0a0a !important;
}

html.dark .app-layout__sidebar .sidebar__menu.el-menu-dark .el-sub-menu .el-menu,
html.dark .app-layout__sidebar .el-menu-dark .el-sub-menu .el-menu {
  background-color: #0a0a0a !important;
}

/* ========== 组件级别的暗色主题样式（共享样式） ========== */
/* 这些样式需要放在共享组件库中，确保所有应用都能正确应用 */
/* 注意：已关闭 qiankun 的样式隔离（experimentalStyleIsolation: false），主应用和子应用样式不隔离 */
/* 使用 html.dark 作为最外层选择器，确保样式能够应用到所有应用 */
/* 同时使用 #subapp-viewport 和 [data-qiankun] 选择器，确保能够匹配到子应用容器 */

/* 调整暗黑模式下的表格背景色 */
html.dark .el-table,
html.dark #subapp-viewport .el-table,
html.dark #subapp-viewport [data-qiankun] .el-table,
html.dark [data-qiankun] .el-table {
  --el-table-bg-color: var(--el-bg-color);
  --el-table-tr-bg-color: var(--el-bg-color);
  --el-table-row-hover-bg-color: var(--el-fill-color-light);
}

html.dark .el-table__header .el-table__cell,
html.dark #subapp-viewport .el-table__header .el-table__cell,
html.dark #subapp-viewport [data-qiankun] .el-table__header .el-table__cell,
html.dark [data-qiankun] .el-table__header .el-table__cell {
  background-color: var(--el-bg-color) !important;
}

/* 优化暗黑模式下的遮罩层 */
html.dark .el-overlay,
html.dark #subapp-viewport .el-overlay,
html.dark #subapp-viewport [data-qiankun] .el-overlay,
html.dark [data-qiankun] .el-overlay {
  background-size: 4px 4px;
  backdrop-filter: saturate(50%) blur(4px);
}

/* CRUD 容器背景 */
html.dark .crud-container,
html.dark #subapp-viewport .crud-container,
html.dark #subapp-viewport [data-qiankun] .crud-container,
html.dark [data-qiankun] .crud-container {
  background-color: var(--el-bg-color) !important;
}

/* btc-crud 组件背景 */
html.dark .btc-crud,
html.dark #subapp-viewport .btc-crud,
html.dark #subapp-viewport [data-qiankun] .btc-crud,
html.dark [data-qiankun] .btc-crud {
  background-color: var(--el-bg-color) !important;
}

/* 优化菜单在暗黑模式下的显示 */
html.dark .el-menu,
html.dark #subapp-viewport .el-menu,
html.dark #subapp-viewport [data-qiankun] .el-menu,
html.dark [data-qiankun] .el-menu {
  --el-menu-bg-color: var(--el-bg-color);
  --el-menu-hover-bg-color: var(--el-fill-color-light);
  --el-menu-text-color: #FFFFFF;
  --el-menu-active-color: var(--el-color-primary);
}

/* 确保暗色系统主题下的深色菜单文字颜色为白色 */
html.dark .el-menu-dark,
html.dark #subapp-viewport .el-menu-dark,
html.dark #subapp-viewport [data-qiankun] .el-menu-dark,
html.dark [data-qiankun] .el-menu-dark {
  --el-menu-text-color: #FFFFFF !important;
}

/* 优化下拉菜单 */
html.dark .el-dropdown-menu,
html.dark #subapp-viewport .el-dropdown-menu,
html.dark #subapp-viewport [data-qiankun] .el-dropdown-menu,
html.dark [data-qiankun] .el-dropdown-menu {
  --el-dropdown-menu-box-shadow: var(--el-box-shadow-light);
}

/* 优化抽屉 */
html.dark .el-drawer,
html.dark #subapp-viewport .el-drawer,
html.dark #subapp-viewport [data-qiankun] .el-drawer,
html.dark [data-qiankun] .el-drawer {
  --el-drawer-bg-color: var(--el-bg-color);
}

/* 确保子应用根容器使用正确的背景色 */
html.dark #app,
html.dark #subapp-viewport #app,
html.dark #subapp-viewport [data-qiankun],
html.dark #subapp-viewport [data-qiankun] #app,
html.dark [data-qiankun] #app {
  background-color: var(--el-bg-color) !important;
}

/* Element Plus 组件背景色覆盖 */
html.dark .el-card,
html.dark #subapp-viewport .el-card,
html.dark #subapp-viewport [data-qiankun] .el-card,
html.dark [data-qiankun] .el-card {
  --el-card-bg-color: var(--el-bg-color);
  background-color: var(--el-bg-color) !important;
}

html.dark .el-dialog,
html.dark #subapp-viewport .el-dialog,
html.dark #subapp-viewport [data-qiankun] .el-dialog,
html.dark [data-qiankun] .el-dialog {
  --el-dialog-bg-color: var(--el-bg-color);
  background-color: var(--el-bg-color) !important;
}

html.dark .el-popover,
html.dark #subapp-viewport .el-popover,
html.dark #subapp-viewport [data-qiankun] .el-popover,
html.dark [data-qiankun] .el-popover {
  --el-popover-bg-color: var(--el-bg-color);
  background-color: var(--el-bg-color) !important;
}

html.dark .el-tooltip__popper,
html.dark #subapp-viewport .el-tooltip__popper,
html.dark #subapp-viewport [data-qiankun] .el-tooltip__popper,
html.dark [data-qiankun] .el-tooltip__popper {
  --el-tooltip-bg-color: var(--el-bg-color);
  background-color: var(--el-bg-color) !important;
}

/* 移除开发者工具悬浮按钮的阴影 */
.el-tooltip__trigger .dev-tools__toggle,
.dev-tools__toggle {
  box-shadow: none !important;
}

html.dark .el-select-dropdown,
html.dark #subapp-viewport .el-select-dropdown,
html.dark #subapp-viewport [data-qiankun] .el-select-dropdown,
html.dark [data-qiankun] .el-select-dropdown {
  --el-select-dropdown-bg-color: var(--el-bg-color);
  background-color: var(--el-bg-color) !important;
}

html.dark .el-picker__popper,
html.dark #subapp-viewport .el-picker__popper,
html.dark #subapp-viewport [data-qiankun] .el-picker__popper,
html.dark [data-qiankun] .el-picker__popper {
  --el-datepicker-bg-color: var(--el-bg-color);
  background-color: var(--el-bg-color) !important;
}

html.dark .el-input,
html.dark #subapp-viewport .el-input,
html.dark #subapp-viewport [data-qiankun] .el-input,
html.dark [data-qiankun] .el-input {
  --el-input-bg-color: var(--el-bg-color);
}

html.dark .el-textarea,
html.dark #subapp-viewport .el-textarea,
html.dark #subapp-viewport [data-qiankun] .el-textarea,
html.dark [data-qiankun] .el-textarea {
  --el-input-bg-color: var(--el-bg-color);
}

html.dark .el-select,
html.dark #subapp-viewport .el-select,
html.dark #subapp-viewport [data-qiankun] .el-select,
html.dark [data-qiankun] .el-select {
  --el-select-input-color: var(--el-text-color-primary);
}

/* btc-contain 组件背景色 */
html.dark .btc-container,
html.dark #subapp-viewport .btc-container,
html.dark #subapp-viewport [data-qiankun] .btc-container,
html.dark [data-qiankun] .btc-container {
  background-color: var(--el-bg-color-page) !important;
}

html.dark .btc-container__content,
html.dark #subapp-viewport .btc-container__content,
html.dark #subapp-viewport [data-qiankun] .btc-container__content,
html.dark [data-qiankun] .btc-container__content {
  background-color: var(--el-bg-color-page) !important;
}

/* ========== btc-table-button 暗色主题样式 ========== */
/* 确保 btc-table-button 在暗色模式下的主题色和 hover 效果正确 */
html.dark .btc-table-button,
html.dark #subapp-viewport .btc-table-button,
html.dark #subapp-viewport [data-qiankun] .btc-table-button,
html.dark [data-qiankun] .btc-table-button {
  --btc-table-button-color: var(--el-color-primary);
}

/* 注意：移除了通用的 btc-table-button hover 样式，因为：
   1. 在 minimal 模式下，应该使用 --btc-crud-icon-color 而不是 --btc-table-button-color
   2. 组件自身的 scoped 样式已经处理了 hover 效果
   3. 避免样式冲突和覆盖问题
*/

/* ========== btc-master-list 暗色主题样式 ========== */
/* 确保 btc-master-list 在暗色模式下的激活样式和图标背景色正确 */
html.dark .btc-master-list__node-label.is-active,
html.dark #subapp-viewport .btc-master-list__node-label.is-active,
html.dark #subapp-viewport [data-qiankun] .btc-master-list__node-label.is-active,
html.dark [data-qiankun] .btc-master-list__node-label.is-active {
  color: var(--el-color-primary) !important;
}

html.dark .btc-master-list__node-icon,
html.dark #subapp-viewport .btc-master-list__node-icon,
html.dark #subapp-viewport [data-qiankun] .btc-master-list__node-icon,
html.dark [data-qiankun] .btc-master-list__node-icon {
  background-color: var(--el-fill-color-light) !important;
}

/* ========== btc-crud 相关组件暗色主题样式 ========== */
/* 确保 btc-crud 相关按钮和图标在暗色模式下的主题色和 hover 效果正确 */

/* 注意：移除了 btc-crud-btn 的全局 hover 样式，因为：
   1. 在 minimal 模式下，应该使用 index.scss 中的样式
   2. 避免样式冲突和覆盖问题
   3. 让组件自身的样式和 index.scss 中的样式自然工作
*/

/* btc-crud 中的 btc-table-button hover 样式（minimal 模式） */
/* 注意：移除了 !important，让组件自身的样式和 index.scss 中的样式自然工作 */
html.dark [data-button-style='minimal'] .btc-crud .btc-table-button:hover,
html.dark #subapp-viewport [data-button-style='minimal'] .btc-crud .btc-table-button:hover,
html.dark #subapp-viewport [data-qiankun] [data-button-style='minimal'] .btc-crud .btc-table-button:hover,
html.dark [data-qiankun] [data-button-style='minimal'] .btc-crud .btc-table-button:hover {
  border-color: var(--btc-crud-icon-color);
  background-color: color-mix(in srgb, var(--btc-crud-icon-color) 12%, transparent);
}

/* btc-comm__icon hover 样式 */
html.dark .btc-comm__icon,
html.dark #subapp-viewport .btc-comm__icon,
html.dark #subapp-viewport [data-qiankun] .btc-comm__icon,
html.dark [data-qiankun] .btc-comm__icon {
  border-color: var(--el-border-color) !important;
  background-color: var(--el-bg-color) !important;
}

html.dark .btc-comm__icon:hover,
html.dark #subapp-viewport .btc-comm__icon:hover,
html.dark #subapp-viewport [data-qiankun] .btc-comm__icon:hover,
html.dark [data-qiankun] .btc-comm__icon:hover {
  background-color: var(--el-fill-color-light) !important;
  border-color: var(--el-color-primary) !important;
}

