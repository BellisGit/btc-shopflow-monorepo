// ==================== CRUD 基础样式 ====================
// 容器和行布局

.btc-crud {
	height: 100%; // 像 cl-crud 一样自动占据父容器高度
	position: relative;
	box-sizing: border-box;
	display: flex; // 使用 flex 布局
	flex-direction: column; // 垂直布局
	min-height: 0; // 允许收缩（在 flex 布局中仍然需要）

	&.is-border {
		border: 1px solid var(--el-border-color);
		border-radius: var(--el-border-radius-base);
	}

	> .btc-crud-row {
		width: 100%;
		flex-shrink: 0; // 关键：操作行不收缩，保持固定高度

		.btc-flex1 {
			margin-right: 0;
		}
	}

	// 表格行：不占据剩余空间，让表格通过 max-height 限制高度
	> .btc-crud-row:has(.btc-table) {
		// 表格区域样式（自适应 + 高度约束 + 滚动基础）
		width: 100%;
		// 不设置 flex: 1，让表格行根据内容自然占据空间
		// 表格高度通过 max-height 限制，由 useTableHeight 计算
		position: relative;
		box-sizing: border-box;
		// 注意：滚动由内部的 el-scrollbar 处理，这里只负责布局约束

		.btc-table {
			width: 100%;
			// 表格通过 max-height 限制高度，不需要设置 height: 100%
			display: flex;
			flex-direction: column;

			// el-table 不需要设置 height: 100%，使用 max-height 即可
			:deep(.el-table) {
				display: flex;
				flex-direction: column;
			}

			// el-table 的滚动容器
			// 注意：滚动由 el-scrollbar 处理，这里不需要设置 overflow
			:deep(.el-table__inner) {
				flex: 1;
				min-height: 0;
			}
		}
	}

	// 分页器行：紧跟在表格后面
	> .btc-crud-row:has(.el-pagination) {
		flex-shrink: 0; // 关键：分页器不收缩
		// margin-top: auto 会导致分页器在加载时跳到页面底部，移除
	}

	> .btc-crud-row + .btc-crud-row {
		margin-top: var(--btc-crud-gap, 10px);
	}
}

.btc-crud-row {
	display: flex;
	flex-wrap: wrap;
	align-items: center;
	row-gap: 10px;
	column-gap: 10px;
	// 注意：不使用 flex-grow 或 flex-shrink，保持内容高度
	// 表格高度由 useTableHeight 通过 JavaScript 动态计算
}

.btc-crud-row > .btc-search-key {
	margin-right: 0; // 移除负边距，让搜索框和表格右侧对齐

	&:first-child {
		margin-left: -10px;
	}
}

.btc-table {
	width: 100%;
}

.btc-crud-primary-actions {
	display: inline-flex;
	align-items: center;
	column-gap: 12px;
}

.btc-crud-row .el-button + .el-button {
	margin-left: 0;
}

// BTC CRUD Component Global Styles
// 完全对齐 cool-admin 的样式结构（逐字复制）

// source is cool-admin-vue-8.x/packages/crud/src/static/index.scss - ensure btc classes mirror cl classes closely
.btc-crud {
	--btc-crud-gap: 10px;
	--btc-crud-op-width: 220px;
}
