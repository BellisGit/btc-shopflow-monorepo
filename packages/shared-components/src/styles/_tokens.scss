// ==================== 设计令牌（Design Tokens）====================
// 集中管理 BTC 项目的核心设计变量
// 这些变量是项目设计规范的基础，所有组件和应用都应该使用这些变量
//
// 使用说明：
// 1. 优先使用 Element Plus 变量（--el-*），这些变量会自动适配主题
// 2. 仅在 Element Plus 未覆盖的场景使用 BTC 自定义变量（--btc-*）
// 3. 所有变量都应该提供默认值，确保在变量未定义时也能正常工作
// 4. 变量名使用语义化命名，表达含义而非具体值
//
// 迁移说明：
// ✅ 已完成迁移：使用 @btc/design-tokens 包管理设计令牌
// 设计令牌包中的 SCSS 变量通过 #{} 插值转换为 CSS 变量

// ==================== 导入设计令牌包 =====================
// 从 @btc/design-tokens 包导入编译后的设计令牌（SCSS 变量）
@use '@btc/design-tokens/scss' as *;

// ==================== BTC 自定义设计令牌（从设计令牌包转换）====================
// 将设计令牌包中的 SCSS 变量转换为 CSS 变量

:root {
  // ==================== 约束间距标尺 ====================
  --btc-spacing-0: #{$btc-spacing-0};
  --btc-spacing-0-5: #{$btc-spacing-0-5};
  --btc-spacing-1: #{$btc-spacing-1};
  --btc-spacing-1-5: #{$btc-spacing-1-5};
  --btc-spacing-2: #{$btc-spacing-2};
  --btc-spacing-2-5: #{$btc-spacing-2-5};
  --btc-spacing-3: #{$btc-spacing-3};
  --btc-spacing-3-5: #{$btc-spacing-3-5};
  --btc-spacing-4: #{$btc-spacing-4};
  --btc-spacing-5: #{$btc-spacing-5};
  --btc-spacing-6: #{$btc-spacing-6};
  --btc-spacing-7: #{$btc-spacing-7};
  --btc-spacing-8: #{$btc-spacing-8};
  --btc-spacing-9: #{$btc-spacing-9};
  --btc-spacing-10: #{$btc-spacing-10};
  --btc-spacing-11: #{$btc-spacing-11};
  --btc-spacing-12: #{$btc-spacing-12};
  --btc-spacing-14: #{$btc-spacing-14};
  --btc-spacing-16: #{$btc-spacing-16};
  --btc-spacing-20: #{$btc-spacing-20};
  --btc-spacing-24: #{$btc-spacing-24};
  --btc-spacing-28: #{$btc-spacing-28};
  --btc-spacing-32: #{$btc-spacing-32};
  --btc-spacing-36: #{$btc-spacing-36};
  --btc-spacing-40: #{$btc-spacing-40};
  --btc-spacing-44: #{$btc-spacing-44};
  --btc-spacing-48: #{$btc-spacing-48};
  --btc-spacing-52: #{$btc-spacing-52};
  --btc-spacing-56: #{$btc-spacing-56};
  --btc-spacing-60: #{$btc-spacing-60};
  --btc-spacing-64: #{$btc-spacing-64};
  --btc-spacing-72: #{$btc-spacing-72};
  --btc-spacing-80: #{$btc-spacing-80};
  --btc-spacing-96: #{$btc-spacing-96};

  // ==================== 风格套件原始变量 ====================
  --btc-style-minimal-surface-page: #{$btc-style-minimal-surface-page};
  --btc-style-minimal-surface-card: #{$btc-style-minimal-surface-card};
  --btc-style-minimal-surface-panel: #{$btc-style-minimal-surface-panel};
  --btc-style-minimal-border-base: #{$btc-style-minimal-border-base};
  --btc-style-minimal-border-muted: #{$btc-style-minimal-border-muted};
  --btc-style-minimal-shadow-card: #{$btc-style-minimal-shadow-card};
  --btc-style-minimal-shadow-panel: #{$btc-style-minimal-shadow-panel};
  --btc-style-minimal-effect-blur: #{$btc-style-minimal-effect-blur};

  --btc-style-glass-surface-page: #{$btc-style-glass-surface-page};
  --btc-style-glass-surface-card: #{$btc-style-glass-surface-card};
  --btc-style-glass-surface-panel: #{$btc-style-glass-surface-panel};
  --btc-style-glass-border-base: #{$btc-style-glass-border-base};
  --btc-style-glass-border-muted: #{$btc-style-glass-border-muted};
  --btc-style-glass-shadow-card: #{$btc-style-glass-shadow-card};
  --btc-style-glass-shadow-panel: #{$btc-style-glass-shadow-panel};
  --btc-style-glass-effect-blur: #{$btc-style-glass-effect-blur};

  --btc-style-cyber-surface-page: #{$btc-style-cyber-surface-page};
  --btc-style-cyber-surface-card: #{$btc-style-cyber-surface-card};
  --btc-style-cyber-surface-panel: #{$btc-style-cyber-surface-panel};
  --btc-style-cyber-border-base: #{$btc-style-cyber-border-base};
  --btc-style-cyber-border-muted: #{$btc-style-cyber-border-muted};
  --btc-style-cyber-shadow-card: #{$btc-style-cyber-shadow-card};
  --btc-style-cyber-shadow-panel: #{$btc-style-cyber-shadow-panel};
  --btc-style-cyber-effect-blur: #{$btc-style-cyber-effect-blur};

  // ==================== 当前生效风格变量（默认 glass）====================
  --btc-surface-page: var(--btc-style-glass-surface-page);
  --btc-surface-card: var(--btc-style-glass-surface-card);
  --btc-surface-panel: var(--btc-style-glass-surface-panel);
  --btc-border-base: var(--btc-style-glass-border-base);
  --btc-border-muted: var(--btc-style-glass-border-muted);
  --btc-shadow-card: var(--btc-style-glass-shadow-card);
  --btc-shadow-panel: var(--btc-style-glass-shadow-panel);
  --btc-effect-blur: var(--btc-style-glass-effect-blur);

  // ==================== 玻璃态风格变量重写（根据用户反馈优化）====================
  // 浅色模式：更通透的白色，高模糊度
  --btc-style-glass-surface-page: rgba(255, 255, 255, 0.4);
  --btc-style-glass-surface-card: rgba(255, 255, 255, 0.65);
  --btc-style-glass-surface-panel: rgba(255, 255, 255, 0.75);
  --btc-style-glass-border-base: rgba(255, 255, 255, 0.6);
  --btc-style-glass-border-muted: rgba(255, 255, 255, 0.3);
  --btc-style-glass-effect-blur: 20px;
  --btc-style-glass-shadow-card: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
  --btc-style-glass-shadow-panel: 0 8px 32px 0 rgba(31, 38, 135, 0.1);

  // 暗色模式适配
  html.dark & {
    --btc-style-glass-surface-page: rgba(0, 0, 0, 0.2);
    --btc-style-glass-surface-card: rgba(30, 30, 30, 0.4);
    --btc-style-glass-surface-panel: rgba(40, 40, 40, 0.5);
    --btc-style-glass-border-base: rgba(255, 255, 255, 0.1);
    --btc-style-glass-border-muted: rgba(255, 255, 255, 0.05);
    --btc-style-glass-shadow-card: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
    --btc-style-glass-shadow-panel: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
  }

  // CRUD 组件相关令牌
  // CRUD 行间距（默认 10px）
  --btc-crud-gap: #{$btc-crud-gap};

  // CRUD 操作列宽度（默认 220px）
  --btc-crud-op-width: #{$btc-crud-op-width};

  // CRUD 搜索框宽度（默认继承 op-width）
  --btc-crud-search-width: #{$btc-crud-search-width};

  // CRUD 按钮颜色（默认继承文本颜色）
  --btc-crud-btn-color: #{$btc-crud-btn-color};

  // CRUD 图标颜色（默认继承主色）
  --btc-crud-icon-color: #{$btc-crud-icon-color};

  // 图标颜色（默认继承文本颜色）
  --btc-icon-color: #{$btc-icon-color};

  // 呼吸灯颜色（默认继承主色）
  --btc-breath-color: #{$btc-breath-color};

  // 表格按钮颜色（默认继承主色）
  --btc-table-button-color: #{$btc-table-button-color};

  // Loading circle 缺口玉色轮廓
  --btc-loading-circle-gap: #{$btc-loading-circle-gap-color};
}

// ==================== 风格切换映射 ====================
html[data-style='glass'] {
  // ==================== 玻璃态风格系统 (Glassmorphism System) ====================
  // 参考 haowallpaper.com 设计风格
  // 特点：通透、模糊、轻量阴影、根据亮暗模式自适应

  // ----- 1. 定义语义化玻璃态变量 (Semantic Glass Tokens) -----

  // 基础参数
  --btc-effect-blur: 24px;
  --btc-effect-saturate: 180%;

  // 默认模式 (Light Mode) - 以白色为基底的通透感
  --btc-glass-base: rgba(255, 255, 255, 0.4);      // 基础玻璃层
  --btc-glass-panel: rgba(255, 255, 255, 0.6);     // 面板/侧边栏 (稍厚)
  --btc-glass-card: rgba(255, 255, 255, 0.5);      // 卡片 (中等)
  --btc-glass-float: rgba(255, 255, 255, 0.8);     // 悬浮层/弹窗 (较厚)
  --btc-glass-input: rgba(255, 255, 255, 0.3);     // 输入框 (较薄)

  --btc-glass-border: rgba(255, 255, 255, 0.6);    // 强边框
  --btc-glass-border-weak: rgba(255, 255, 255, 0.3); // 弱边框

  --btc-glass-text: #333333;                       // 主要文字 (深灰)
  --btc-glass-text-secondary: #666666;             // 次要文字

  --btc-glass-shadow-sm: 0 4px 16px rgba(0, 0, 0, 0.05);
  --btc-glass-shadow-md: 0 8px 32px rgba(0, 0, 0, 0.1);
  --btc-glass-shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.15);

  // 暗黑模式 (Dark Mode) - 以深灰/黑为基底的深邃感
  &.dark {
    --btc-glass-base: rgba(30, 30, 30, 0.4);
    --btc-glass-panel: rgba(40, 40, 40, 0.6);
    --btc-glass-card: rgba(50, 50, 50, 0.5);
    --btc-glass-float: rgba(60, 60, 60, 0.8);
    --btc-glass-input: rgba(0, 0, 0, 0.3);

    --btc-glass-border: rgba(255, 255, 255, 0.15);
    --btc-glass-border-weak: rgba(255, 255, 255, 0.08);

    --btc-glass-text: #ffffff;
    --btc-glass-text-secondary: #aaaaaa;

    --btc-glass-shadow-sm: 0 4px 16px rgba(0, 0, 0, 0.4);
    --btc-glass-shadow-md: 0 8px 32px rgba(0, 0, 0, 0.5);
    --btc-glass-shadow-lg: 0 16px 48px rgba(0, 0, 0, 0.6);
  }

  // ----- 2. 映射到 BTC 标准变量 (Map to Standard Tokens) -----

  // 页面背景：完全透明，透出底层背景图
  --btc-surface-page: transparent;

  // 面板/容器背景
  --btc-surface-panel: var(--btc-glass-panel);
  --btc-surface-card: var(--btc-glass-card);

  // 边框
  --btc-border-base: var(--btc-glass-border);
  --btc-border-muted: var(--btc-glass-border-weak);

  // 阴影
  --btc-shadow-card: var(--btc-glass-shadow-md);
  --btc-shadow-panel: var(--btc-glass-shadow-lg);

  // ----- 3. 覆盖 Element Plus 变量 (Override Element Plus) -----
  // 确保所有 Element Plus 组件 (Input, Button, Menu, Dialog, Table) 都继承玻璃态

  // 背景色
  --el-bg-color: var(--btc-glass-panel);
  --el-bg-color-overlay: var(--btc-glass-float); // 下拉菜单/弹窗背景
  --el-bg-color-page: transparent; // 页面背景透明

  // 边框
  --el-border-color: var(--btc-glass-border);
  --el-border-color-light: var(--btc-glass-border-weak);
  --el-border-color-lighter: var(--btc-glass-border-weak);
  --el-border-color-extra-light: var(--btc-glass-border-weak);

  // 文字颜色 (确保在玻璃背景上清晰可见)
  --el-text-color-primary: var(--btc-glass-text);
  --el-text-color-regular: var(--btc-glass-text);
  --el-text-color-secondary: var(--btc-glass-text-secondary);
  --el-text-color-placeholder: var(--btc-glass-text-secondary);

  // 填充色 (Input, Tag 等背景)
  --el-fill-color: var(--btc-glass-input);
  --el-fill-color-light: var(--btc-glass-input);
  --el-fill-color-lighter: rgba(255, 255, 255, 0.1); // 极浅填充
  --el-fill-color-blank: transparent; // 输入框背景透明

  // 遮罩层
  --el-mask-color: rgba(0, 0, 0, 0.4); // 遮罩层稍微加深
  --el-mask-color-extra-light: rgba(0, 0, 0, 0.2);

  // 原始变量引用（已覆盖，保留注释供参考）
  // --btc-surface-page: var(--btc-style-glass-surface-page);
  // ...
}

html[data-style='cyber'] {
  --btc-surface-page: var(--btc-style-cyber-surface-page);
  --btc-surface-card: var(--btc-style-cyber-surface-card);
  --btc-surface-panel: var(--btc-style-cyber-surface-panel);
  --btc-border-base: var(--btc-style-cyber-border-base);
  --btc-border-muted: var(--btc-style-cyber-border-muted);
  --btc-shadow-card: var(--btc-style-cyber-shadow-card);
  --btc-shadow-panel: var(--btc-style-cyber-shadow-panel);
  --btc-effect-blur: var(--btc-style-cyber-effect-blur);
}

// ==================== 组件级变量定义 ====================
// 这些变量在组件选择器中定义，只在组件内有效
// 定义位置：各组件样式文件中

// CRUD 组件变量（定义在 .btc-crud 中）
// 位置：crud/_base.scss
// --btc-crud-gap
// --btc-crud-op-width

// CRUD 按钮变量（定义在 .btc-crud-btn 中）
// 位置：crud/_button.scss
// --btc-crud-btn-color
// --btc-crud-icon-color

// 图标按钮变量（定义在 .btc-comm__icon 中）
// 位置：_components.scss
// --btc-icon-color

// 呼吸灯变量（定义在 .btc-icon-button--breath 中）
// 位置：_components.scss
// --btc-breath-color

// ==================== 变量使用指南 ====================
//
// 1. 优先使用 Element Plus 变量
//    color: var(--el-text-color-primary);
//
// 2. 使用 BTC 变量时提供默认值
//    gap: var(--btc-crud-gap, 10px);
//
// 3. 变量可以嵌套引用
//    --btc-crud-search-width: var(--btc-crud-op-width, 220px);
//
// 4. 组件级变量可以覆盖全局变量
//    .btc-crud {
//      --btc-crud-gap: 15px;  // 覆盖全局默认值
//    }

// ==================== 主题切换支持 ====================
//
// Element Plus 变量会在主题切换时自动更新
// BTC 自定义变量如果引用了 Element Plus 变量，也会自动适配
//
// 示例：
// --btc-icon-color: var(--el-text-color-primary);
// 在暗色主题下，--el-text-color-primary 变为 #e5eaf3
// --btc-icon-color 也会自动变为 #e5eaf3

// ==================== 扩展说明 ====================
//
// 如需新增设计令牌：
// 1. 确定变量作用域（全局 or 组件级）
// 2. 使用语义化命名（--btc-xxx）
// 3. 提供默认值或引用现有变量
// 4. 更新 CSS_VARIABLES.md 文档
// 5. 在本文档中添加注释说明
