#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” æ­£åœ¨æ£€æŸ¥æäº¤ä¿¡æ¯æ ¼å¼..."

# è¿è¡Œ commitlint æ£€æŸ¥æäº¤ä¿¡æ¯
pnpm exec commitlint --edit "$1"
EXIT_CODE=$?

# å¦‚æœ commitlint æ£€æŸ¥å¤±è´¥ï¼Œæä¾›å‹å¥½çš„æç¤º
if [ $EXIT_CODE -ne 0 ]; then
  echo ""
  echo "âŒ æäº¤ä¿¡æ¯æ ¼å¼ä¸ç¬¦åˆè§„èŒƒï¼"
  echo ""
  echo "ğŸ“ æäº¤ä¿¡æ¯æ ¼å¼è¦æ±‚ï¼š"
  echo "   <type>(<scope>): <subject>"
  echo ""
  echo "   ç±»å‹ï¼ˆtypeï¼‰ï¼šfeat, fix, docs, style, refactor, test, chore"
  echo "   ä½œç”¨åŸŸï¼ˆscopeï¼‰ï¼šå¯é€‰ï¼Œå¦‚ i18n, menu, logistics ç­‰"
  echo "   ä¸»é¢˜ï¼ˆsubjectï¼‰ï¼šç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡50å­—ç¬¦ï¼Œé¦–å­—æ¯å°å†™"
  echo ""
  echo "ğŸ“‹ æ­£ç¡®ç¤ºä¾‹ï¼š"
  echo "   âœ… feat(i18n): Fix menu structure for logistics app"
  echo "   âœ… fix(menu): Correct procurement module naming"
  echo "   âœ… docs: Update commit message template"
  echo ""
  echo "ğŸ“‹ é”™è¯¯ç¤ºä¾‹ï¼š"
  echo "   âŒ fix menu structure  (ç¼ºå°‘ç±»å‹å’Œå†’å·)"
  echo "   âŒ Fix menu structure  (ç±»å‹é¦–å­—æ¯å¤§å†™)"
  echo "   âŒ feat:fix menu structure  (ç¼ºå°‘ç©ºæ ¼)"
  echo ""
  echo "ğŸ’¡ æç¤ºï¼š"
  echo "   - ä½¿ç”¨ 'git commit' ä¼šè‡ªåŠ¨æ‰“å¼€æäº¤æ¨¡æ¿"
  echo "   - åªéœ€å¡«å†™ç¬¬ä¸€è¡Œå³å¯å®Œæˆç®€å•æäº¤"
  echo "   - è¯¦ç»†è¯´æ˜å¯ä»¥å†™åœ¨æ­£æ–‡éƒ¨åˆ†ï¼ˆå¯é€‰ï¼‰"
  echo ""
  exit 1
fi

echo "âœ… æäº¤ä¿¡æ¯æ ¼å¼éªŒè¯é€šè¿‡ï¼"
