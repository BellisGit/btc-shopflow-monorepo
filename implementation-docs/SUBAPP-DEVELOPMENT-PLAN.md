# 微前端子应用开发规划文档

## 子应用架构设计

### 整体架构
BTC ShopFlow 采用 qiankun 微前端架构，主应用作为容器，负责：
- 路由管理和子应用加载
- 全局状态管理
- 共享组件和工具库
- 权限控制和用户认证

子应用独立开发和部署，通过主应用统一管理。

### 技术栈
- **前端框架**: Vue 3 + TypeScript
- **构建工具**: Vite
- **UI 组件**: Element Plus + 共享组件库
- **状态管理**: Pinia
- **路由管理**: Vue Router
- **HTTP 请求**: 基于 EPS 系统的统一请求封装

### 子应用结构
```
子应用目录结构：
├── src/
│   ├── main.ts              # 应用入口
│   ├── App.vue              # 根组件
│   ├── router/              # 路由配置
│   ├── store/               # 状态管理
│   ├── views/               # 页面组件
│   ├── components/          # 组件
│   ├── services/            # API 服务
│   └── types/               # 类型定义
├── public/                  # 静态资源
├── package.json             # 依赖配置
├── vite.config.ts           # Vite 配置
└── tsconfig.json            # TypeScript 配置
```

## 物流应用（logistics-app）功能规划

### 1. 采购订单管理

#### 1.1 采购订单列表
- **功能描述**: 管理所有采购订单，支持查询、筛选、排序
- **页面路径**: `/logistics/purchase-orders`
- **主要功能**:
  - 订单列表展示（表格形式）
  - 订单状态管理（待审批、已审批、已发货、已完成等）
  - 订单搜索和筛选（按供应商、日期、状态等）
  - 订单详情查看
  - 订单导出功能

#### 1.2 采购订单创建/编辑
- **功能描述**: 创建新的采购订单或编辑现有订单
- **页面路径**: `/logistics/purchase-orders/create`、`/logistics/purchase-orders/:id/edit`
- **主要功能**:
  - 供应商选择（级联选择器）
  - 商品信息录入（支持批量添加）
  - 数量、单价、总价计算
  - 订单备注和附件上传
  - 审批流程配置

#### 1.3 供应商管理
- **功能描述**: 管理供应商信息
- **页面路径**: `/logistics/suppliers`
- **主要功能**:
  - 供应商列表管理（CRUD）
  - 供应商资质管理
  - 供应商评级系统
  - 供应商联系人管理

### 2. 入库管理

#### 2.1 入库单管理
- **功能描述**: 管理所有入库单据
- **页面路径**: `/logistics/inbound`
- **主要功能**:
  - 入库单列表展示
  - 入库单创建和编辑
  - 入库验收流程
  - 入库确认和库存更新

#### 2.2 入库验收
- **功能描述**: 对入库商品进行验收
- **页面路径**: `/logistics/inbound/:id/inspection`
- **主要功能**:
  - 商品验收清单
  - 质量检验记录
  - 不合格品处理
  - 验收报告生成

### 3. 出库管理

#### 3.1 出库单管理
- **功能描述**: 管理所有出库单据
- **页面路径**: `/logistics/outbound`
- **主要功能**:
  - 出库单列表展示
  - 出库单创建和编辑
  - 出库审批流程
  - 出库确认和库存扣减

#### 3.2 出库审批
- **功能描述**: 出库单审批流程
- **页面路径**: `/logistics/outbound/:id/approval`
- **主要功能**:
  - 审批流程配置
  - 审批意见记录
  - 审批状态跟踪
  - 审批通知

### 4. 库存管理

#### 4.1 库存查询
- **功能描述**: 查询当前库存情况
- **页面路径**: `/logistics/inventory`
- **主要功能**:
  - 库存列表展示
  - 库存数量查询
  - 库存位置管理
  - 库存历史记录

#### 4.2 库存预警
- **功能描述**: 库存预警和补货提醒
- **页面路径**: `/logistics/inventory/alerts`
- **主要功能**:
  - 库存预警设置
  - 预警通知
  - 自动补货建议
  - 预警历史记录

#### 4.3 库存盘点
- **功能描述**: 定期库存盘点
- **页面路径**: `/logistics/inventory/stocktaking`
- **主要功能**:
  - 盘点计划制定
  - 盘点任务分配
  - 盘点数据录入
  - 盘点差异处理

#### 4.4 库存调拨
- **功能描述**: 库存在不同仓库间调拨
- **页面路径**: `/logistics/inventory/transfer`
- **主要功能**:
  - 调拨单创建
  - 调拨审批流程
  - 调拨执行跟踪
  - 调拨完成确认

### 5. 物流跟踪

#### 5.1 物流信息查询
- **功能描述**: 查询物流配送信息
- **页面路径**: `/logistics/tracking`
- **主要功能**:
  - 物流单号查询
  - 配送状态跟踪
  - 配送路径显示
  - 预计到达时间

#### 5.2 物流状态更新
- **功能描述**: 更新物流状态信息
- **页面路径**: `/logistics/tracking/update`
- **主要功能**:
  - 状态手动更新
  - 自动状态同步
  - 异常状态处理
  - 状态变更通知

#### 5.3 物流报表
- **功能描述**: 生成物流相关报表
- **页面路径**: `/logistics/reports`
- **主要功能**:
  - 配送效率报表
  - 成本分析报表
  - 异常情况报表
  - 报表导出功能

## 工程应用（engineering-app）功能规划

### 1. 工程设计管理
- **功能描述**: 管理工程设计方案和图纸
- **页面路径**: `/engineering/designs`
- **主要功能**:
  - 设计方案列表
  - 设计图纸管理
  - 版本控制
  - 设计审批流程

### 2. 工程进度跟踪
- **功能描述**: 跟踪工程项目进度
- **页面路径**: `/engineering/progress`
- **主要功能**:
  - 项目进度展示
  - 里程碑管理
  - 进度报告生成
  - 延期预警

### 3. 工程资源管理
- **功能描述**: 管理工程所需资源
- **页面路径**: `/engineering/resources`
- **主要功能**:
  - 资源需求计划
  - 资源分配管理
  - 资源使用跟踪
  - 成本控制

## 品质应用（quality-app）功能规划

### 1. 质量检验管理
- **功能描述**: 管理质量检验流程
- **页面路径**: `/quality/inspection`
- **主要功能**:
  - 检验计划制定
  - 检验任务分配
  - 检验结果记录
  - 不合格品处理

### 2. 质量控制流程
- **功能描述**: 质量控制流程管理
- **页面路径**: `/quality/control`
- **主要功能**:
  - 质量控制点设置
  - 质量指标监控
  - 异常处理流程
  - 质量改进建议

### 3. 质量报告生成
- **功能描述**: 生成质量相关报告
- **页面路径**: `/quality/reports`
- **主要功能**:
  - 质量统计报表
  - 趋势分析报告
  - 不合格品分析
  - 质量成本分析

## 生产应用（production-app）功能规划

### 1. 生产计划管理
- **功能描述**: 制定和管理生产计划
- **页面路径**: `/production/planning`
- **主要功能**:
  - 生产计划制定
  - 产能规划
  - 生产排程
  - 计划调整

### 2. 生产进度跟踪
- **功能描述**: 跟踪生产进度
- **页面路径**: `/production/progress`
- **主要功能**:
  - 生产进度监控
  - 生产任务分配
  - 进度报告生成
  - 异常处理

### 3. 生产资源调度
- **功能描述**: 调度生产资源
- **页面路径**: `/production/resources`
- **主要功能**:
  - 设备调度
  - 人员调度
  - 物料调度
  - 资源利用率分析

## 开发顺序和时间规划

### 第一阶段：物流应用开发（2-3 周）
**优先级：最高**

#### 第1周：基础功能开发
- 采购订单管理基础功能
- 供应商管理
- 基础页面布局和路由

#### 第2周：核心功能开发
- 入库管理功能
- 出库管理功能
- 库存查询功能

#### 第3周：高级功能和优化
- 库存预警和盘点
- 物流跟踪功能
- 报表生成功能
- 性能优化和测试

### 第二阶段：工程应用开发（2 周）
**优先级：高**

#### 第1周：核心功能开发
- 工程设计管理
- 工程进度跟踪

#### 第2周：高级功能开发
- 工程资源管理
- 报表和统计功能

### 第三阶段：品质应用开发（2 周）
**优先级：高**

#### 第1周：核心功能开发
- 质量检验管理
- 质量控制流程

#### 第2周：高级功能开发
- 质量报告生成
- 数据分析和统计

### 第四阶段：生产应用开发（2 周）
**优先级：高**

#### 第1周：核心功能开发
- 生产计划管理
- 生产进度跟踪

#### 第2周：高级功能开发
- 生产资源调度
- 生产报表和统计

### 第五阶段：系统集成和优化（1 周）
**优先级：中**

#### 集成和优化
- 子应用间数据交互
- 性能优化
- 用户体验优化
- 系统测试和调试

## 技术实现要点

### 1. 共享组件复用
- 复用主应用的共享组件库
- 使用 BtcCrud、BtcTableGroup 等组件
- 保持 UI 风格一致性

### 2. EPS 系统集成
- 每个子应用都集成 EPS 系统
- 自动生成 API 类型定义
- 统一的数据请求处理

### 3. 状态管理
- 使用 Pinia 进行状态管理
- 模块化的状态设计
- 与主应用的状态同步

### 4. 路由设计
- 子应用内部路由管理
- 与主应用路由的协调
- 面包屑和导航支持

### 5. 权限控制
- 集成主应用的权限系统
- 子应用级别的权限控制
- 页面和功能权限管理

## 质量保证

### 1. 代码质量
- TypeScript 严格模式
- ESLint 和 Prettier 代码规范
- 单元测试覆盖

### 2. 性能优化
- 代码分割和懒加载
- 组件缓存优化
- 网络请求优化

### 3. 用户体验
- 响应式设计
- 加载状态提示
- 错误处理机制

### 4. 兼容性
- 浏览器兼容性测试
- 移动端适配
- 跨应用数据同步

## 总结

微前端子应用的开发将采用渐进式的方式，从物流应用开始，逐步完成工程、品质、生产应用的开发。通过复用已有的技术积累和组件库，可以高效地完成开发任务，同时保持系统的整体一致性和可维护性。

每个子应用都将具备完整的功能模块，能够独立运行，同时与主应用保持良好的集成。通过统一的架构设计和技术规范，确保整个系统的稳定性和可扩展性。
