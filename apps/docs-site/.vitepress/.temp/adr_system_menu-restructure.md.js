import { ssrRenderAttrs, ssrRenderStyle } from "vue/server-renderer";
import { useSSRContext } from "vue";
import { _ as _export_sfc } from "./plugin-vue_export-helper.1tPrXgE0.js";
const __pageData = JSON.parse('{"title":"系统管理菜单重构 - 按业务领域重组权限管理","description":"","frontmatter":{"title":"系统管理菜单重构 - 按业务领域重组权限管理","type":"adr","project":"system","owner":"dev-team","created":"2025-10-12","updated":"2025-10-13","publish":true,"tags":["adr","system","menu","restructure"],"sidebar_label":"菜单重构","sidebar_order":3,"sidebar_group":"adr-system"},"headers":[],"relativePath":"adr/system/menu-restructure.md","filePath":"adr/system/menu-restructure.md","lastUpdated":1760420026000}');
const _sfc_main = { name: "adr/system/menu-restructure.md" };
function _sfc_ssrRender(_ctx, _push, _parent, _attrs, $props, $setup, $data, $options) {
  _push(`<div${ssrRenderAttrs(_attrs)}><h1 id="adr-系统管理菜单重构" tabindex="-1">ADR: 系统管理菜单重构 <a class="header-anchor" href="#adr-系统管理菜单重构" aria-label="Permalink to &quot;ADR: 系统管理菜单重构&quot;">​</a></h1><blockquote><p><strong>状态</strong>: 已采纳<br><strong>日期</strong>: 2025-10-12<br><strong>决策者</strong>: 系统架构师<br><strong>影响范围</strong>: 系统管理界面和权限体系</p></blockquote><hr><h2 id="context" tabindex="-1">Context <a class="header-anchor" href="#context" aria-label="Permalink to &quot;Context&quot;">​</a></h2><p><strong>问题</strong>：原有菜单结构采用&quot;系统管理 权限管理&quot;的单层嵌套，将所有 10个页面平铺在同一级别：域插件模块用户租户菜单行为角色资源部门</p><p><strong>痛点</strong>：</p><ol><li><strong>业务语义不清</strong>：不同业务领域的概念混在一起（平台 vs 组织 vs 访问控制）</li><li><strong>扩展性差</strong>：新增绑定页面高级功能无合适归属</li><li><strong>认知负担高</strong>：10个页面平铺，难以快速定位</li></ol><p><strong>触发因素</strong>：用户提供了新的权限系统设计，包含5大业务模块和13个新页面需求</p><h2 id="options" tabindex="-1">Options <a class="header-anchor" href="#options" aria-label="Permalink to &quot;Options&quot;">​</a></h2><h3 id="a-保留现有结构-新增平级模块" tabindex="-1">A. 保留现有结构，新增平级模块 <a class="header-anchor" href="#a-保留现有结构-新增平级模块" aria-label="Permalink to &quot;A. 保留现有结构，新增平级模块&quot;">​</a></h3><p><strong>方案</strong>：在&quot;系统管理&quot;下新增&quot;平台治理&quot;&quot;组织与账号&quot;等平级子菜单</p><p><strong>优点</strong>：</p><ul><li>改动最小</li><li>旧路径继续可用</li></ul><p><strong>缺点</strong>：</p><ul><li>菜单层级更深（3-4层）</li><li>&quot;系统管理&quot;变得臃肿</li></ul><h3 id="b-完全重构为5大业务模块-选择" tabindex="-1">B. 完全重构为5大业务模块（选择） <a class="header-anchor" href="#b-完全重构为5大业务模块-选择" aria-label="Permalink to &quot;B. 完全重构为5大业务模块（选择）&quot;">​</a></h3><p><strong>方案</strong>：</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>平台治理（域模块插件）</span></span>
<span class="line"><span>组织与账号（租户部门用户 + 绑定管理）</span></span>
<span class="line"><span>访问控制（资源行为权限角色策略 + 组合工具）</span></span>
<span class="line"><span>导航与可见性（菜单 + 预览）</span></span>
<span class="line"><span>运维与审计（日志基线模拟器）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>优点</strong>：</p><ul><li><strong>业务语义清晰</strong>：按领域分组</li><li><strong>可扩展性强</strong>：每个模块可独立扩展</li><li><strong>认知负担低</strong>：层级扁平，分类明确</li></ul><p><strong>缺点</strong>：</p><ul><li>需要迁移所有页面路径</li><li>旧路径需要兼容处理</li></ul><h3 id="c-混合方案" tabindex="-1">C. 混合方案 <a class="header-anchor" href="#c-混合方案" aria-label="Permalink to &quot;C. 混合方案&quot;">​</a></h3><p><strong>方案</strong>：保留部分旧路径，新功能用新结构</p><p><strong>缺点</strong>：</p><ul><li>结构不一致，更混乱</li></ul><h2 id="decision" tabindex="-1">Decision <a class="header-anchor" href="#decision" aria-label="Permalink to &quot;Decision&quot;">​</a></h2><p><strong>选择方案 B：完全重构为5大业务模块</strong></p><p><strong>理由</strong>：</p><ol><li><strong>业务语义优先</strong>：清晰的领域划分 &gt; 保持旧路径</li><li><strong>长期收益</strong>：初期迁移成本可控，长期维护成本降低</li><li><strong>用户体验</strong>：新用户更容易理解系统结构</li></ol><p><strong>实施策略</strong>：</p><ol><li>页面迁移：物理移动目录（10个页面）</li><li>路径更新：所有路由从 <code>/system/permission/*</code> 改为 <code>/platform/*\`\`/org/*</code> 等</li><li>兼容处理：tabRegistry 保留旧路径映射，避免刷新丢失</li><li>新页面创建：13个新页面，使用 Mock 数据</li></ol><h2 id="consequences" tabindex="-1">Consequences <a class="header-anchor" href="#consequences" aria-label="Permalink to &quot;Consequences&quot;">​</a></h2><h3 id="正向" tabindex="-1">正向 <a class="header-anchor" href="#正向" aria-label="Permalink to &quot;正向&quot;">​</a></h3><ol><li><strong>业务清晰</strong>：5大模块语义明确</li><li><strong>易于扩展</strong>：每个模块独立，不互相干扰</li><li><strong>降低认知</strong>：菜单项从10个分散到5个模块，每个模块2-6项</li><li><strong>支持高级功能</strong>：绑定管理组合工具模拟器等都有合理归属</li></ol><h3 id="负向" tabindex="-1">负向 <a class="header-anchor" href="#负向" aria-label="Permalink to &quot;负向&quot;">​</a></h3><ol><li><strong>路径变更</strong>：旧书签/链接失效（已通过 tabRegistry 兼容缓解）</li><li><strong>迁移成本</strong>：需要更新13个文件（路由菜单搜索i18n）</li><li><strong>Mock数据</strong>：13个新页面暂时使用 Mock，待后端就绪后替换</li></ol><h2 id="implementation" tabindex="-1">Implementation <a class="header-anchor" href="#implementation" aria-label="Permalink to &quot;Implementation&quot;">​</a></h2><h3 id="文件变更统计" tabindex="-1">文件变更统计 <a class="header-anchor" href="#文件变更统计" aria-label="Permalink to &quot;文件变更统计&quot;">​</a></h3><p><strong>新建</strong>：23个页面</p><ul><li>10个迁移页面（复制到新位置）</li><li>2个权限页面（permissions, policies）</li><li>4个绑定管理页面</li><li>5个高级功能页面（perm-compose, menu-preview, audit, baseline, simulator）</li><li>1个Mock工具（utils/mock.ts）</li></ul><p><strong>修改</strong>：7个配置文件</p><ul><li><code>router/index.ts</code> - 路由配置</li><li><code>micro/menus.ts</code> - 菜单定义</li><li><code>layout/dynamic-menu/index.vue</code> - 菜单渲染</li><li><code>layout/global-search/index.vue</code> - 搜索数据</li><li><code>store/tabRegistry.ts</code> - Tab注册</li><li><code>i18n/locales/zh-CN.ts</code> - 中文翻译</li><li><code>i18n/locales/en-US.ts</code> - 英文翻译</li></ul><p><strong>删除</strong>：1个目录</p><ul><li><code>pages/system/</code> - 旧页面目录</li></ul><h3 id="新菜单结构" tabindex="-1">新菜单结构 <a class="header-anchor" href="#新菜单结构" aria-label="Permalink to &quot;新菜单结构&quot;">​</a></h3><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>平台治理 (platform)</span></span>
<span class="line"><span>域 (domains)</span></span>
<span class="line"><span>模块 (modules)</span></span>
<span class="line"><span>插件 (plugins)</span></span>
<span class="line"><span>组织与账号 (org)</span></span>
<span class="line"><span>租户 (tenants)</span></span>
<span class="line"><span>部门 (departments)</span></span>
<span class="line"><span>用户 (users)</span></span>
<span class="line"><span>访问控制 (access)</span></span>
<span class="line"><span>资源 (resources)</span></span>
<span class="line"><span>行为 (actions)</span></span>
<span class="line"><span>权限 (permissions)</span></span>
<span class="line"><span>角色 (roles)</span></span>
<span class="line"><span>策略 (policies)</span></span>
<span class="line"><span>权限组合 (permissions/compose)</span></span>
<span class="line"><span>导航与可见性 (navigation)</span></span>
<span class="line"><span>菜单 (menus)</span></span>
<span class="line"><span>菜单预览 (menus/preview)</span></span>
<span class="line"><span>运维与审计 (ops)</span></span>
<span class="line"><span>操作日志 (audit)</span></span>
<span class="line"><span>权限基线 (baseline)</span></span>
<span class="line"><span>策略模拟器 (simulator)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="mock-数据策略" tabindex="-1">Mock 数据策略 <a class="header-anchor" href="#mock-数据策略" aria-label="Permalink to &quot;Mock 数据策略&quot;">​</a></h3><p><strong>原则</strong>：</p><ul><li>使用 <code>localStorage</code> 模拟持久化</li><li>CRUD 完整支持（add/update/delete/page）</li><li>带默认数据，便于演示</li><li>提供 <code>createMockCrudService</code> 工具</li></ul><p><strong>后端就绪后</strong>：只需替换 service 引用，页面代码无需修改</p><h2 id="risks-mitigation" tabindex="-1">Risks &amp; Mitigation <a class="header-anchor" href="#risks-mitigation" aria-label="Permalink to &quot;Risks &amp; Mitigation&quot;">​</a></h2><table tabindex="0"><thead><tr><th>风险</th><th>影响</th><th>缓解措施</th><th style="${ssrRenderStyle({ "text-align": "center" })}">状态</th></tr></thead><tbody><tr><td>旧链接失效</td><td>中</td><td>tabRegistry 兼容映射</td><td style="${ssrRenderStyle({ "text-align": "center" })}"></td></tr><tr><td>Mock数据与真实API不一致</td><td>中</td><td>严格遵循现有service接口</td><td style="${ssrRenderStyle({ "text-align": "center" })}"></td></tr><tr><td>新页面功能不完整</td><td>低</td><td>核心CRUD已实现，高级功能待扩展</td><td style="${ssrRenderStyle({ "text-align": "center" })}"></td></tr></tbody></table><h2 id="review" tabindex="-1">Review <a class="header-anchor" href="#review" aria-label="Permalink to &quot;Review&quot;">​</a></h2><p><strong>预期收益</strong>：</p><ul><li>菜单清晰度提升：</li><li>可扩展性提升：</li><li>用户体验提升：</li></ul><p><strong>实施难度</strong>：（中等）</p><p><strong>建议后续</strong>：</p><ol><li>后端API就绪后，替换Mock服务</li><li>增加绑定管理页面的实际功能测试</li><li>高级功能（baseline对比simulator）完善逻辑</li></ol></div>`);
}
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("adr/system/menu-restructure.md");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
const menuRestructure = /* @__PURE__ */ _export_sfc(_sfc_main, [["ssrRender", _sfc_ssrRender]]);
export {
  __pageData,
  menuRestructure as default
};
