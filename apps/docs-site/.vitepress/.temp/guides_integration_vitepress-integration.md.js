import { ssrRenderAttrs, ssrRenderStyle } from "vue/server-renderer";
import { useSSRContext } from "vue";
import { _ as _export_sfc } from "./plugin-vue_export-helper.1tPrXgE0.js";
const __pageData = JSON.parse('{"title":"文档集成","description":"","frontmatter":{"title":"文档集成","type":"guide","project":"btc-shopflow","owner":"dev-team","created":"2025-10-13T00:00:00.000Z","updated":"2025-10-13T00:00:00.000Z","publish":true,"tags":["integration","guides"],"sidebar_label":"文档集成","sidebar_order":1,"sidebar_group":"integration"},"headers":[],"relativePath":"guides/integration/vitepress-integration.md","filePath":"guides/integration/vitepress-integration.md","lastUpdated":1760420026000}');
const _sfc_main = { name: "guides/integration/vitepress-integration.md" };
function _sfc_ssrRender(_ctx, _push, _parent, _attrs, $props, $setup, $data, $options) {
  _push(`<div${ssrRenderAttrs(_attrs)}><h1 id="vitepress-文档中心集成完成报告" tabindex="-1">VitePress 文档中心集成完成报告 <a class="header-anchor" href="#vitepress-文档中心集成完成报告" aria-label="Permalink to &quot;VitePress 文档中心集成完成报告&quot;">​</a></h1><h2 id="完成时间" tabindex="-1">完成时间 <a class="header-anchor" href="#完成时间" aria-label="Permalink to &quot;完成时间&quot;">​</a></h2><p>2025-10-13</p><h2 id="实施方案" tabindex="-1">实施方案 <a class="header-anchor" href="#实施方案" aria-label="Permalink to &quot;实施方案&quot;">​</a></h2><p><strong>方案 A2-1：iframe 嵌入 + 主应用侧边栏隐藏</strong></p><p>VitePress 作为独立应用运行在 8086 端口，通过 iframe 嵌入到主应用中进入文档中心后，主应用的左侧菜单自动隐藏，VitePress 完全接管显示区域</p><h2 id="实施内容" tabindex="-1">实施内容 <a class="header-anchor" href="#实施内容" aria-label="Permalink to &quot;实施内容&quot;">​</a></h2><h3 id="_1-vitepress-基础架构" tabindex="-1">1. VitePress 基础架构 <a class="header-anchor" href="#_1-vitepress-基础架构" aria-label="Permalink to &quot;1. VitePress 基础架构&quot;">​</a></h3><ul><li><strong>package.json</strong> - 添加所有必要依赖（VitePressElement Plusgray-matterajvglob 等）</li><li><strong>VitePress 配置</strong> - 端口 8086导航搜索别名SSR 配置</li><li><strong>自定义主题</strong> - 复用主应用的 theme.scss 和 global.scss</li><li><strong>自定义组件</strong>:</li><li><code>DocumentMeta.vue</code> - 文档元数据展示（作者日期标签保密级别）</li><li><code>Demo.vue</code> - 组件演示容器</li></ul><h3 id="_2-主题同步机制" tabindex="-1">2. 主题同步机制 <a class="header-anchor" href="#_2-主题同步机制" aria-label="Permalink to &quot;2. 主题同步机制&quot;">​</a></h3><p><strong>VitePress 端（接收方）</strong>:</p><ul><li>从 <code>localStorage</code> 读取 <code>isDark</code> 初始化主题</li><li>监听来自主应用的 <code>postMessage</code>（<code>btc-theme-sync</code> 消息）</li><li>监听 <code>storage</code> 事件（跨标签页同步）</li><li>同时更新 <code>vitepress-theme-appearance</code> 和 <code>isDark</code></li><li>通过 <code>.dark</code> class 控制 VitePress 的暗黑模式</li></ul><p><strong>主应用端（发送方）</strong>:</p><ul><li>创建 <code>/docs</code> 页面，使用 iframe 嵌入 VitePress</li><li>监听主题切换语言切换storage 变化</li><li>通过 <code>postMessage</code> 实时通知 iframe 内的 VitePress</li><li>VitePress 准备好后自动同步初始状态</li></ul><h3 id="_3-文档管理脚本" tabindex="-1">3. 文档管理脚本 <a class="header-anchor" href="#_3-文档管理脚本" aria-label="Permalink to &quot;3. 文档管理脚本&quot;">​</a></h3><ul><li><strong><code>ingest.ts</code></strong> - 文档收录脚本（扫描验证Git 元数据生成索引）</li><li><strong><code>add-frontmatter.ts</code></strong> - 批量添加 frontmatter</li><li><strong><code>validate-frontmatter.ts</code></strong> - 验证 frontmatter</li><li><strong><code>new-doc.ts</code></strong> - 交互式创建新文档</li><li><strong><code>frontmatter.schema.json</code></strong> - JSON Schema 验证规范</li><li><strong><code>.sources.json</code></strong> - 源文档白名单配置</li></ul><h3 id="_4-主应用集成" tabindex="-1">4. 主应用集成 <a class="header-anchor" href="#_4-主应用集成" aria-label="Permalink to &quot;4. 主应用集成&quot;">​</a></h3><ul><li><strong>路由配置</strong> - 添加 <code>/docs</code> 路由</li><li><strong>菜单配置</strong> - 添加&quot;文档中心&quot;菜单项（Document 图标）</li><li><strong>tab 注册</strong> - 添加 docs tab 元数据</li><li><strong>i18n 翻译</strong> - 中英文&quot;文档中心&quot;/&quot;Docs Center&quot;</li><li><strong>docs-mode CSS</strong> - 自动隐藏左侧边栏的样式</li></ul><h3 id="_5-启动脚本" tabindex="-1">5. 启动脚本 <a class="header-anchor" href="#_5-启动脚本" aria-label="Permalink to &quot;5. 启动脚本&quot;">​</a></h3><p><code>start-all.bat</code> - 一键启动所有应用（包括 docs-site）</p><h2 id="技术实现细节" tabindex="-1">技术实现细节 <a class="header-anchor" href="#技术实现细节" aria-label="Permalink to &quot;技术实现细节&quot;">​</a></h2><h3 id="postmessage-通信" tabindex="-1">postMessage 通信 <a class="header-anchor" href="#postmessage-通信" aria-label="Permalink to &quot;postMessage 通信&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">// 主应用发送消息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">docsIframe.contentWindow.</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">postMessage</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">({</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">type: </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&#39;btc-theme-sync&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">,</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">isDark: </span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">true</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">}, </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&#39;*&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">);</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}">// VitePress 接收消息</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">window.</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">addEventListener</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&#39;message&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">, (</span><span style="${ssrRenderStyle({ "--shiki-light": "#E36209", "--shiki-dark": "#FFAB70" })}">event</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">) </span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">=&gt;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">if</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> (event.data?.type </span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">===</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> &#39;btc-theme-sync&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> { </span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">isDark</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> } </span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">=</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> event.data;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">applyTheme</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(isDark);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">}</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="主题应用-vitepress" tabindex="-1">主题应用（VitePress） <a class="header-anchor" href="#主题应用-vitepress" aria-label="Permalink to &quot;主题应用（VitePress）&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">function</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}"> applyTheme</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "--shiki-light": "#E36209", "--shiki-dark": "#FFAB70" })}">isDark</span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">:</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> boolean</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">const</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> html</span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}"> =</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> document.documentElement;</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">if</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> (isDark) {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">html.classList.</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">add</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&#39;dark&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">localStorage.</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">setItem</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&#39;vitepress-theme-appearance&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&#39;dark&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">} </span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">else</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">html.classList.</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">remove</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&#39;dark&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">localStorage.</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">setItem</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&#39;vitepress-theme-appearance&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&#39;light&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">);</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">}</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">localStorage.</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">setItem</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}">&#39;isDark&#39;</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">, </span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">JSON</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">.</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">stringify</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">(isDark));</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="docs-mode-css" tabindex="-1">docs-mode CSS <a class="header-anchor" href="#docs-mode-css" aria-label="Permalink to &quot;docs-mode CSS&quot;">​</a></h3><div class="language-scss vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">scss</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#22863A", "--shiki-dark": "#85E89D" })}">body</span><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">.docs-mode</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">.app-layout__sidebar</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">display</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">: </span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">none</span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}"> !important</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">}</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">.app-layout__main</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">margin-left</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">: </span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">0</span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}"> !important</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">}</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">.app-layout__content</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}"> {</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">padding</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">: </span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">0</span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}"> !important</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">height</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">: </span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">100</span><span style="${ssrRenderStyle({ "--shiki-light": "#D73A49", "--shiki-dark": "#F97583" })}">%</span><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">;</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">}</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#24292E", "--shiki-dark": "#E1E4E8" })}">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="目录结构" tabindex="-1">目录结构 <a class="header-anchor" href="#目录结构" aria-label="Permalink to &quot;目录结构&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>apps/docs-site/</span></span>
<span class="line"><span>.vitepress/</span></span>
<span class="line"><span>config.ts # VitePress 配置（端口 8086）</span></span>
<span class="line"><span>theme/ # 自定义主题</span></span>
<span class="line"><span>index.ts # 主题入口（复用主应用配置，postMessage 监听）</span></span>
<span class="line"><span>components/ # 自定义组件</span></span>
<span class="line"><span>DocumentMeta.vue</span></span>
<span class="line"><span>Demo.vue</span></span>
<span class="line"><span>schemas/ # frontmatter JSON Schema</span></span>
<span class="line"><span>_ingested/ # 收录的文档（自动生成）</span></span>
<span class="line"><span>scripts/ # 脚本工具</span></span>
<span class="line"><span>ingest.ts</span></span>
<span class="line"><span>add-frontmatter.ts</span></span>
<span class="line"><span>validate-frontmatter.ts</span></span>
<span class="line"><span>new-doc.ts</span></span>
<span class="line"><span>.sources.json # 源文档配置</span></span>
<span class="line"><span>index.md # 首页</span></span>
<span class="line"><span>timeline/ # 时间线页面</span></span>
<span class="line"><span>projects/ # 项目索引页面</span></span>
<span class="line"><span>types/ # 类型索引页面</span></span>
<span class="line"><span>tags/ # 标签页面</span></span>
<span class="line"><span>README.md # 使用指南</span></span>
<span class="line"><span>package.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="使用指南" tabindex="-1">使用指南 <a class="header-anchor" href="#使用指南" aria-label="Permalink to &quot;使用指南&quot;">​</a></h2><h3 id="启动所有应用" tabindex="-1">启动所有应用 <a class="header-anchor" href="#启动所有应用" aria-label="Permalink to &quot;启动所有应用&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}"># 方式 1：一键启动所有应用（推荐）</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">pnpm</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> dev</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}"># 方式 2：使用 Turbo 启动</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">pnpm</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> dev:all</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}"># 方式 3：单独启动文档中心</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}">cd</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> apps/docs-site</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">pnpm</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="访问地址" tabindex="-1">访问地址 <a class="header-anchor" href="#访问地址" aria-label="Permalink to &quot;访问地址&quot;">​</a></h3><ul><li><strong>主应用</strong>: <a href="http://localhost:8080" target="_blank" rel="noreferrer">http://localhost:8080</a></li><li><strong>物流应用</strong>: <a href="http://localhost:8081" target="_blank" rel="noreferrer">http://localhost:8081</a></li><li><strong>工程应用</strong>: <a href="http://localhost:8082" target="_blank" rel="noreferrer">http://localhost:8082</a></li><li><strong>品质应用</strong>: <a href="http://localhost:8083" target="_blank" rel="noreferrer">http://localhost:8083</a></li><li><strong>生产应用</strong>: <a href="http://localhost:8084" target="_blank" rel="noreferrer">http://localhost:8084</a></li><li><strong>文档中心（独立）</strong>: <a href="http://localhost:8085" target="_blank" rel="noreferrer">http://localhost:8085</a></li><li><strong>文档中心（嵌入）</strong>: <a href="http://localhost:8080/docs" target="_blank" rel="noreferrer">http://localhost:8080/docs</a> （点击主应用左侧菜单&quot;文档中心&quot;）</li></ul><h3 id="创建新文档" tabindex="-1">创建新文档 <a class="header-anchor" href="#创建新文档" aria-label="Permalink to &quot;创建新文档&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}"># 使用交互式向导</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">pnpm</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> --filter</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> docs-site</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> new-doc</span></span>
<span class="line"></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6A737D", "--shiki-dark": "#6A737D" })}"># 或手动创建后运行 ingest</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">pnpm</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> --filter</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> docs-site</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> ingest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="验证文档" tabindex="-1">验证文档 <a class="header-anchor" href="#验证文档" aria-label="Permalink to &quot;验证文档&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">pnpm</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> --filter</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> docs-site</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> validate-frontmatter</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="功能特性" tabindex="-1">功能特性 <a class="header-anchor" href="#功能特性" aria-label="Permalink to &quot;功能特性&quot;">​</a></h2><h3 id="_1-主题实时同步" tabindex="-1">1. 主题实时同步 <a class="header-anchor" href="#_1-主题实时同步" aria-label="Permalink to &quot;1. 主题实时同步&quot;">​</a></h3><ul><li>主应用切换暗黑模式 VitePress 立即响应</li><li>初始加载时从 localStorage 读取主题</li><li>VitePress 刷新后保持主题一致</li><li>跨标签页同步</li></ul><h3 id="_2-视觉统一" tabindex="-1">2. 视觉统一 <a class="header-anchor" href="#_2-视觉统一" aria-label="Permalink to &quot;2. 视觉统一&quot;">​</a></h3><ul><li>VitePress 使用主应用的 CSS 变量和主题样式</li><li>保留 VitePress 的侧边栏导航和搜索</li><li>进入文档中心时隐藏主应用侧边栏</li><li>保留主应用的 topbar 和 tabbar</li></ul><h3 id="_3-文档管理" tabindex="-1">3. 文档管理 <a class="header-anchor" href="#_3-文档管理" aria-label="Permalink to &quot;3. 文档管理&quot;">​</a></h3><ul><li>frontmatter 验证（JSON Schema）</li><li>Git 元数据提取（commitauthordate）</li><li>自动生成索引页（时间线项目类型标签）</li><li>多维度文档分类</li><li>保密级别控制</li></ul><h3 id="_4-组件演示" tabindex="-1">4. 组件演示 <a class="header-anchor" href="#_4-组件演示" aria-label="Permalink to &quot;4. 组件演示&quot;">​</a></h3><ul><li>在文档中使用 <code>&lt;Demo&gt;</code> 组件</li><li>可以引用 @btc/shared-components 的所有组件</li><li>代码和效果对照展示</li></ul><h2 id="注意事项" tabindex="-1">注意事项 <a class="header-anchor" href="#注意事项" aria-label="Permalink to &quot;注意事项&quot;">​</a></h2><h3 id="_1-端口占用" tabindex="-1">1. 端口占用 <a class="header-anchor" href="#_1-端口占用" aria-label="Permalink to &quot;1. 端口占用&quot;">​</a></h3><p>确保 8086 端口未被占用如果被占用，VitePress 会报错（<code>strictPort: true</code>）</p><h3 id="_2-主题同步延迟" tabindex="-1">2. 主题同步延迟 <a class="header-anchor" href="#_2-主题同步延迟" aria-label="Permalink to &quot;2. 主题同步延迟&quot;">​</a></h3><p>postMessage 通信是异步的，主题切换可能有 ~100ms 延迟如果需要更快响应，可以调整 <code>setTimeout</code> 时间</p><h3 id="_3-语言切换" tabindex="-1">3. 语言切换 <a class="header-anchor" href="#_3-语言切换" aria-label="Permalink to &quot;3. 语言切换&quot;">​</a></h3><p>VitePress 的界面文本是构建时确定的，不支持运行时切换语言当前配置为中文主界面，但 Element Plus 组件的语言可以动态切换</p><p>如果需要完整的多语言切换：</p><ul><li>构建两个版本的 VitePress（中文版和英文版）</li><li>或刷新 iframe 来切换语言（会丢失当前滚动位置）</li></ul><h3 id="_4-iframe-限制" tabindex="-1">4. iframe 限制 <a class="header-anchor" href="#_4-iframe-限制" aria-label="Permalink to &quot;4. iframe 限制&quot;">​</a></h3><ul><li>VitePress 和主应用在不同的 JavaScript 上下文</li><li>需要通过 postMessage 通信</li><li>不能直接访问主应用的 Vue 组件或状态</li></ul><h3 id="_5-文档收录规则" tabindex="-1">5. 文档收录规则 <a class="header-anchor" href="#_5-文档收录规则" aria-label="Permalink to &quot;5. 文档收录规则&quot;">​</a></h3><p>只有 <code>publish: true</code> 的文档才会被 ingest 收录确保新文档的 frontmatter 包含完整的必需字段</p><h2 id="后续工作" tabindex="-1">后续工作 <a class="header-anchor" href="#后续工作" aria-label="Permalink to &quot;后续工作&quot;">​</a></h2><h3 id="phase-1-文档迁移-待执行" tabindex="-1">Phase 1: 文档迁移（待执行） <a class="header-anchor" href="#phase-1-文档迁移-待执行" aria-label="Permalink to &quot;Phase 1: 文档迁移（待执行）&quot;">​</a></h3><ol><li><strong>批量添加 frontmatter</strong></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">pnpm</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> --filter</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> docs-site</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> add-frontmatter</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="2"><li><strong>运行 ingest 收录</strong></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">pnpm</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> --filter</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> docs-site</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> ingest</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ol start="3"><li><strong>验证结果</strong></li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">pnpm</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> --filter</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> docs-site</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> validate-frontmatter</span></span>
<span class="line"><span style="${ssrRenderStyle({ "--shiki-light": "#6F42C1", "--shiki-dark": "#B392F0" })}">pnpm</span><span style="${ssrRenderStyle({ "--shiki-light": "#005CC5", "--shiki-dark": "#79B8FF" })}"> --filter</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> docs-site</span><span style="${ssrRenderStyle({ "--shiki-light": "#032F62", "--shiki-dark": "#9ECBFF" })}"> dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="4"><li><strong>删除原文档</strong>（慎重！确认迁移成功后）</li></ol><ul><li>删除 <code>docs/guides/</code></li><li>删除 <code>docs/adr/</code></li><li>删除 <code>docs/sop/</code></li><li>删除所有包级 README</li><li>保留项目级 README</li></ul><h3 id="phase-2-组件文档-可选" tabindex="-1">Phase 2: 组件文档（可选） <a class="header-anchor" href="#phase-2-组件文档-可选" aria-label="Permalink to &quot;Phase 2: 组件文档（可选）&quot;">​</a></h3><p>创建组件演示文档：</p><ul><li>components/btc-crud.md</li><li>components/btc-table.md</li><li>components/btc-upsert.md</li><li>components/btc-dialog.md</li><li>components/btc-form.md</li><li>components/btc-view-group.md</li></ul><h3 id="phase-3-ci-cd-可选" tabindex="-1">Phase 3: CI/CD（可选） <a class="header-anchor" href="#phase-3-ci-cd-可选" aria-label="Permalink to &quot;Phase 3: CI/CD（可选）&quot;">​</a></h3><p>配置文档质量检查和自动部署：</p><ul><li>PR 时验证 frontmatter</li><li>自动构建和部署到内网服务器</li></ul><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>VitePress 文档中心已成功集成到 BTC 车间流程管理系统中：</p><ul><li><strong>完全保留 VitePress 优势</strong>（搜索导航主题SSR）</li><li><strong>主题实时同步</strong>（暗黑模式CSS 变量）</li><li><strong>无缝嵌入主应用</strong>（不需要新标签页跳转）</li><li><strong>文档管理自动化</strong>（收录验证索引生成）</li><li><strong>组件演示能力</strong>（可在文档中演示 BTC 组件）</li></ul><p>用户体验：</p><ul><li>点击&quot;文档中心&quot;菜单 左侧菜单隐藏 VitePress 接管整个显示区域</li><li>切换主题 VitePress 立即同步</li><li>保留 topbar 和 tabbar 可以随时切换回其他应用</li><li>可以打开多个文档标签页</li></ul><p><strong>开始使用</strong>: <code>start-all.bat</code> 启动所有应用，然后访问 <a href="http://localhost:8080" target="_blank" rel="noreferrer">http://localhost:8080</a> 点击&quot;文档中心&quot;！</p></div>`);
}
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("guides/integration/vitepress-integration.md");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
const vitepressIntegration = /* @__PURE__ */ _export_sfc(_sfc_main, [["ssrRender", _sfc_ssrRender]]);
export {
  __pageData,
  vitepressIntegration as default
};
