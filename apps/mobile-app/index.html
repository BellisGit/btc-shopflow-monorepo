<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/logo.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#1976d2" />
    <meta name="msapplication-TileColor" content="#1976d2" />
    <meta name="msapplication-config" content="/browserconfig.xml" />
    <!-- 使用新的标准 meta 标签 -->
    <meta name="mobile-web-app-capable" content="yes" />
    <!-- iOS特定优化 -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="拜里斯科技" />
    <!-- iOS Safari全屏模式优化 -->
    <meta name="apple-touch-fullscreen" content="yes" />
    <!-- 禁用iOS Safari的自动识别电话号码 -->
    <meta name="format-detection" content="telephone=no" />
    <!-- 禁用iOS Safari的自动识别邮箱 -->
    <meta name="format-detection" content="email=no" />
    <!-- 禁用iOS Safari的自动识别地址 -->
    <meta name="format-detection" content="address=no" />
    <!-- iOS图标（支持多种尺寸） -->
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-touch-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon-180x180.png" />
    <!-- Android Chrome特定优化 -->
    <meta name="mobile-web-app-capable" content="yes" />
    <!-- 小米、华为、vivo等国产浏览器优化 -->
    <meta name="x5-orientation" content="portrait" />
    <meta name="x5-fullscreen" content="true" />
    <meta name="x5-page-mode" content="app" />
    <!-- 添加版本号参数强制更新 manifest，避免浏览器缓存旧版本 -->
    <!-- 确保 manifest 文件的 MIME 类型正确 -->
    <!-- 注意：开发环境中，VitePWA 会自动生成 manifest，不需要版本号参数 -->
    <link rel="manifest" href="/manifest.webmanifest" type="application/manifest+json" />

    <title>拜里斯科技</title>
    <style>
      /* 关键：在 HTML 解析时立即设置 body 背景色，避免白屏 */
      body {
        margin: 0 !important;
        padding: 0 !important;
        background-color: #ffffff; /* 默认白色背景 */
      }

      @media (prefers-color-scheme: dark) {
        body {
          background-color: #000000; /* 暗色模式黑色背景 */
        }
      }

    </style>
  </head>
  <body>
    <div id="app">
      <!-- 加载提示 -->
      <div id="loading" style="
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        color: #666;
      ">
        <div style="text-align: center;">
          <p>正在加载应用...</p>
        </div>
      </div>
    </div>
    <script>
      // 全局错误捕获（在应用加载前）
      window.addEventListener('error', function(e) {
        console.error('[Pre-Load Error]', e.error || e.message, e.filename, e.lineno);
        var app = document.getElementById('app');
        if (app) {
          var loading = document.getElementById('loading');
          if (loading) loading.remove();
          app.innerHTML = '<div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #fff; padding: 20px; display: flex; flex-direction: column; justify-content: center; align-items: center; font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', sans-serif;"><h2 style="color: #ff4d4f; margin-bottom: 16px;">应用加载失败</h2><p style="color: #666; margin-bottom: 8px;">错误：' + (e.error?.message || e.message || '未知错误') + '</p><p style="color: #999; font-size: 12px; margin-top: 16px;">文件：' + (e.filename || '未知') + ':' + (e.lineno || '未知') + '</p><button onclick="window.location.reload()" style="margin-top: 20px; padding: 10px 20px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer;">刷新页面</button></div>';
        }
      });
      
      window.addEventListener('unhandledrejection', function(e) {
        console.error('[Pre-Load Promise Rejection]', e.reason);
        var app = document.getElementById('app');
        if (app) {
          var loading = document.getElementById('loading');
          if (loading) loading.remove();
          app.innerHTML = '<div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: #fff; padding: 20px; display: flex; flex-direction: column; justify-content: center; align-items: center; font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', sans-serif;"><h2 style="color: #ff4d4f; margin-bottom: 16px;">应用加载失败</h2><p style="color: #666; margin-bottom: 8px;">错误：' + (e.reason?.message || e.reason?.toString() || '未知错误') + '</p><button onclick="window.location.reload()" style="margin-top: 20px; padding: 10px 20px; background: #1976d2; color: white; border: none; border-radius: 4px; cursor: pointer;">刷新页面</button></div>';
        }
      });
      
      // 应用加载完成后移除加载提示
      window.addEventListener('load', function() {
        setTimeout(function() {
          var loading = document.getElementById('loading');
          if (loading) {
            loading.style.transition = 'opacity 0.3s';
            loading.style.opacity = '0';
            setTimeout(function() {
              loading.remove();
            }, 300);
          }
        }, 100);
      });
    </script>
    <!-- 引入本地阿里云号码认证SDK -->
    <script src="/js/numberAuth-web-sdk.js"></script>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>

